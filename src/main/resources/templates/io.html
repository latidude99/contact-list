<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" type="text/css" th:href="@{css/contacts.css}"/>
  <link rel="stylesheet" type="text/css" th:href="@{css/bootstrap.min.css}"/>
  <script type="text/javascript" th:src="@{js/jquery-3.3.1.min.js}"></script>
  <script type="text/javascript" th:src="@{js/bootstrap.min.js}"></script>
 
</head>
<body>
<div>
	<ul class="topnav">
			<li><a id="title" href="/contacts" th:text="#{app.title}">Contacts</a></li>
			<li><span id="topinfo-first" th:text="#{today.is}">Today is </span></li>
			<li><span id="lastloggeddate" th:text="${#temporals.dayOfWeekName(currentZonedDateTime)}">Thursday</span></li>
			<li><span id="lastloggeddate" th:text="${#temporals.format(currentZonedDateTime, 'dd.MM.yyyy')}">25.05.2018</span></li>
			<li><span id="lastloggeddate" th:text="${#temporals.format(currentZonedDateTime, 'HH:mm')}">Thursday</span></li>
			<li><span id="topinfo-zone" th:text="#{zone}">Zone</span></li>
			<li><span id="lastloggeddate" th:text="${currentZone}">London</span></li>
			<li class="right">
			    <form action="logout" th:action="@{/logout}" method="post" >
			        <input type="submit" id="logmeout" th:value="#{logmeout}" />
			    </form>
			</li>						
			<li class="right"><a id="flags" href="/contacts?lang=ru"><img src="/images/flag_ru128px.png" class="langimg"></img></a></li>
			<li class="right"><a id="flags" href="/contacts?lang=es"><img src="/images/flag_es128px.png" class="langimg"></img></a></li>
			<li class="right"><a id="flags" href="/contacts?lang=pl"><img src="/images/flag_pl128px.png" class="langimg"></img></a></li>
			<li class="right"><a id="flags" href="/contacts?lang=en"><img src="/images/flag_uk128px.png" class="langimg"></img></a></li>
	</ul>
</div>
<div>
	<ul class="topinfo">
			<li><span id="loggedinastext" th:text="#{loggedinas}">You are logged in as: </span></li>
			<li><span id="loggedinasemail" th:text="${currentUser.email}">demo@demo.com</span></li>
			<li><span id="loggedinastext" th:text="#{privileges}">privileges</span></li>
			<li>
			<div sec:authorize="hasRole('ROLE_USER')">
				<span id="loggedinasemail" th:text="#{role.user}">-user-</span>
			</div>
			<div sec:authorize="hasRole('ROLE_ADMIN')">
				<span id="loggedinasemail" th:text="#{role.admin}">-admin-</span>
			</div>
			</li>
			<li><span id="lastloggedtext" th:text="#{account.created}">account created</span></li>
			<li><span id="lastloggeddate" th:text="${#temporals.dayOfWeekName(currentUser.registered)}">Thursday</span></li>
			<li><span id="lastloggeddate" th:text="${#temporals.format(currentUser.registered, 'dd.MM.yyyy')}">25.05.2018</span></li>		
			<li class="right"><span id="lastloggeddate" th:if="${currentUserContacts != null}" th:text="${contactsTotalByUser}">35</span></li>
			<li class="right"><span id="lastloggedtext" th:text="#{number.of.contacts.total}">total</span></li>
			<li class="right"><span id="lastloggeddate" th:if="${currentUserContacts != null}" th:text="${currentUserContacts.size()}">5</span></li>
			<li class="right"><span id="lastloggedtext" th:text="#{number.of.contacts.loaded}">loaded</span></li>
	</ul>
</div>
<div class="box-contacts">
<div class="container" id="container-left">
  <ul class="nav nav-tabs" id="tabs-head">
    <li><a id="tab-link" th:href="@{/contacts}" th:text="#{contacts}">Contacts</a></li>
    <li><a id="tab-link" data-toggle="tab" href="#io" th:text="#{backup.restore}">Backup/Restore</a></li>
    
  </ul>
 <div class="container-list">
  <div class="tab-content" >
      
    <div id="io" class="tab-pane fade in active">
    
    
    
	<div class="box-inout">
	
		<br />	
		<div style="display: block;">
			<form action="#" th:action="@{/clearSelectedContacts}" method="post" th:object="${contactWrapper}">
  	          <input type="hidden" th:field="*{resultList}" />
			  <button class="btn btn-sm" id="inout-btn"  style="width: 86%; margin-left:4%; margin-right:7%;"
			  type="submit" th:text="#{contact.selected.clear}">- Clear selection- </button>
		    </form>
			<br />
		</div>
		
		<div style="display: inline-block; float: left; width:30%; margin-left:3%;">
			<br />	
			<form action="#" th:action="@{/downloadAllCSV}" method="post" th:object="${fromView}">
  	          <input type="hidden" th:field="*{selector}" />
			  <button class="btn btn-sm" id="inout-down-btn" type="submit" th:text="#{contact.download}">- Download All- </button>
		    </form>
		    <span id="io-block" th:text="#{contacts.save}">total</span>
		    <span id="io-block"  th:text="${contactsTotalByUser}">20</span>
			
		 	<br /><br /><br /><br />
			<form action="#" th:action="@{/downloadSelectedCSV}" method="post" th:object="${contactWrapper}">
  	          <input type="hidden" th:field="*{resultList}" />
			  <button class="btn btn-sm" id="inout-down-btn" type="submit" th:text="#{contact.download.selected}">- Download Selected- </button>
		    </form>
		    <span id="io-block" th:text="#{contacts.save}">loaded</span>
		    <span id="io-block" th:text="${contactWrapper.resultList.size()}">5</span>
	     
		     <br /><br /><br /><br />
			 <form action="#" th:action="@{/uploadCSV}" method="post" enctype="multipart/form-data">
		       <button class="btn btn-sm" id="inout-down-btn" type="submit" th:text="#{contact.upload}">- Upload - </button>
		       
			   <input type="file" name="fileUpload" style="padding: 10px 10px 10px 10px; color: white; text: center;"/>
		     </form>  
		     <br /><br />
	
	   
	     
		  </div>
		  <br />
		  <div style="display: inline-block; float: left; margin-left: 30px; width:30%;">
		  	<form action="#" th:action="@{/deleteAll}" method="post" th:object="${currentUser}">
  	          <input type="hidden" th:field="*{email}" />
			  <button class="btn btn-sm" id="inout-delete-btn" type="submit" th:text="#{contact.delete}">- Delete All- </button>
		    </form>
		    <span id="io-block" th:text="#{contacts.to.delete}">total</span>
		    <span id="io-block"  th:text="${contactsTotalByUser}">20</span>
			
		 	<br /><br /><br /><br />
			<form action="#" th:action="@{/deleteSelected}" method="post" th:object="${contactWrapper}">
  	          <input type="hidden" th:field="*{resultList}" />
			  <button class="btn btn-sm" id="inout-delete-btn" type="submit" th:text="#{contact.delete.selected}">- Delete Selected- </button>
		    </form>
		    <span id="io-block" th:text="#{contacts.to.delete}">loaded</span>
		    <span id="io-block" th:text="${contactWrapper.resultList.size()}">5</span>
		  	
		  	<br /><br /><br /><br />
			<form action="#" th:action="@{/undoLastDelete}" method="post" th:object="${contactWrapper}">
  	          <input type="hidden" th:field="*{deletedList}" />
			  <button class="btn btn-sm" id="inout-undo-btn" type="submit" th:text="#{contact.delete.restore}">- Restore Last- </button>
		    </form>
		    <span id="io-block" th:text="#{contacts.to.restore}">loaded</span>
		    <span id="io-block" th:text="${contactWrapper.deletedList.size()}">5</span>
		  
		  </div>  
		  
		  
		  
		  <div style="display: inline-block; float: left; margin-left: 20px; width:30%;">
		  	<form action="#" th:action="@{/checkDuplicates}" method="post" th:object="${contactWrapper}">
  	          <input type="hidden" th:field="*{duplicatedList}" />
			  <button class="btn btn-sm" id="inout-undo-btn" type="submit" th:text="#{check.duplicates}">- Delete All- </button>
		    </form>
		    <span id="io-block" th:text="#{duplicates.in.database}">total</span>
		    <span id="io-block"  th:text="${contactWrapper.duplicatedList.size()}">3</span>
			
		 	<br /><br /><br /><br />
			<form action="#" th:action="@{/deleteDuplicates}" method="post" th:object="${contactWrapper}">
  	          <input type="hidden" th:field="*{duplicatedList}" />
			  <button class="btn btn-sm" id="inout-delete-btn" type="submit" th:text="#{remove.duplicates}">- Delete Selected- </button>
		    </form>
		    <span id="io-block" th:text="#{duplicates.to.remove}">loaded</span>
		    <span id="io-block" th:text="${contactWrapper.duplicatedList.size()}">5</span>
		  	
		  	<br /><br /><br /><br />
			<form action="#" th:action="@{/undoRemoveDuplicates}" method="post" th:object="${contactWrapper}">
  	          <input type="hidden" th:field="*{removedList}" />
			  <button class="btn btn-sm" id="inout-undo-btn" type="submit" th:text="#{contact.removed.restore}">- Restore Last- </button>
		    </form>
		    <span id="io-block" th:text="#{contacts.to.restore}">loaded</span>
		    <span id="io-block" th:text="${contactWrapper.removedList.size()}">5</span>
		  </div> 
		  
		  
	<div style="position: relative; margin-top:40%; margin-left:3%; width:89%;">
		<br />
			<div th:if="${fromView.bulkOpsSwitch} == '0'">	
				<div class="alert alert-info alert-dismissible" style="margin-bottom: 1px !important; height: 30px !important; 
																		line-height:30px !important; padding:0px 15px !important;">
				    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
				    <span th:text="#{contacts.bulk.info}">This alert info box</span>
				</div>
			</div>
			
			<div th:if="${fromView.bulkOpsSwitch} == ''">
				<div class="alert alert-success alert-dismissible">
				    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
				    <strong>Success!</strong> This alert box could indicate a successful or positive action.
				</div>
			</div>
			
						
			<div th:if="${fromView.bulkOpsSwitch} == ''">	
				<div class="alert alert-warning alert-dismissible">
				    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
				    <strong>Warning!</strong> This alert box could indicate a warning that might need attention.
				</div>
			</div>
			
			<div th:if="${fromView.bulkOpsSwitch} == ''">	
				<div class="alert alert-danger alert-dismissible">
				    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
				    <strong>Danger!</strong> This alert box could indicate a dangerous or potentially negative action.
				</div>
			</div>
	</div>
		   
</div>	
    
</div>
</body>
</html>
